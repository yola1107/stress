port 7005
bind 0.0.0.0
protected-mode no
daemonize no
loglevel notice
logfile ""
databases 16
dir /data

requirepass A12345!
masterauth A12345!

cluster-enabled yes
cluster-config-file nodes-7005.conf

# 压测环境建议放宽
cluster-node-timeout 15000
cluster-require-full-coverage no

cluster-announce-ip 192.168.10.83
cluster-announce-port 7005
cluster-announce-bus-port 17005

# 内存策略
maxmemory 2gb
maxmemory-policy allkeys-lru

lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes

# ====== 持久化（全部关闭） ======
appendonly no

# 完全关闭 RDB，避免压测 IO 抖动
save ""

stop-writes-on-bgsave-error no

# 网络 & 高并发
tcp-backlog 65535
tcp-keepalive 300
timeout 0

# 性能调度（压测更激进）
hz 100
dynamic-hz no
activerehashing yes

# 慢查询
slowlog-log-slower-than 10000
slowlog-max-len 1024
latency-monitor-threshold 100
